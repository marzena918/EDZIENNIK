<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>oceny</title>
    <link rel="stylesheet" href="/static/main.style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
<p>dfdfggghh</p>
<div class="sectionAdd">
    <label for="imie_id">imie</label>
    <input type="text" id="imie_id">
    <label for="nazwisko">nazwisko</label>
    <input type="text" id="nazwisko">
<!--    <label for="pesel">pesel</label>-->
<!--    <input type="number" id="pesel" onkeyup="checkPesel(this,document.getElementById('but_id'), null)>-->
</div>
<div>
<label for="subject">wybierz przedmiot</label><br/>
<select id="subject" name="subjects" multiple="true" onchange="checkData()"></select>
    <button id="but_id" disabled="disabled"> <!--onchange="checkData()"--><span class="material-symbols-outlined button">person_add</span>
    </button>


</div>
</body>
<script>


    async function checkData(){
        const name = document.getElementById("imie_id").value;
        const lastName = document.getElementById("nazwisko").value;
        const pesel = document.getElementById("pesel").value;
        const selectedOpt = Array.from(document.getElementById("subject").selectedOptions).map(element => element.value)
        if(selectedOpt){
        }
        if(name && lastName && pesel && selectedOpt){
            document.getElementById("but_id").disabled = false;
             //addTeacher();
       }
    }
    async function get_all_subjects(){
        const subjectsSelect = document.getElementById("subject");

        const subjects =await(await fetch('/teacher/get_all_subjects')).json();
        for(const i of subjects){
        const option =document.createElement("option");
        option.value = i.name;
        option.innerHTML = i.name;
        subjectsSelect.appendChild(option);

        }
        //  const selectedOpt = Array.from(document.getElementById("subject").selectedOptions).map(element => element.value);
        //
        // if (selectedOpt) {
        //     document.getElementById("but_id").disabled = false;
        //     alert("dd");
        //}
    }

    async function sendSubjectsSelected() {
        const subjects = document.getElementById("subject");
        var listSubjects= Array.from(subjects.selectedOptions).map(element => element.value);
    }


function getAllStudentNotes(){
    const params = new Proxy(new URLSearchParams(window.location.search), {
  get: (searchParams, prop) => searchParams.get(prop),
});
    fetch(`/student/oceny/${params.studentId}`)
}
get_all_subjects();

</script>
</html>