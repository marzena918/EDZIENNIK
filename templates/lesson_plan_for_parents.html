<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Plan lekcji - rodzic</title>
    <script src="/static/menu.js"></script>
    <link rel="stylesheet" href="/static/main.style.css">
    <link rel="stylesheet" href="/static/class.style.css">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
</head>
<body>
<div id="menu_id" class="menu"></div>
<script> createMenu(document.getElementById('menu_id'));</script>
<div>

    <label for="children_id">wybierz dziecko </label>
    <select id="children_id" onchange="createLessonPlanTableWithAttendance()"></select>
</div>
<div>
    <label for="date_id">Date</label>
    <input id="date_id" type="month" name="date"  onchange="createLessonPlanTableWithAttendance()">
</div>

<table id="calendar_id">
    <tr>
        <th></th>
        <th>Mon</th>
        <th>Tue</th>
        <th>Wed</th>
        <th>Thu</th>
        <th>Fri</th>
        <th>Sat</th>
        <th>Sun</th>
    </tr>
</table>

</body>
<script>
    async function createSelectOfChildrenForParent() {
        const parent_id = 5;
        const childrenOfParent = await (await fetch(`/student/get_all_children_for_parent/${parent_id}`)).json();
        const selectOfChildren = document.getElementById("children_id");
        for (const i of childrenOfParent) {
            const option = document.createElement("option");
            option.value = i.id
            option.innerHTML = `${i.name} ${i.last_name}`
            selectOfChildren.appendChild(option);
        }
    }

    createSelectOfChildrenForParent();
    document.getElementById('date_id').valueAsDate = new Date();

    async function createLessonPlanTableWithAttendance(){
        const attendance = await getAttendance()
        const summary = fillTable(attendance)
        displaySummary(summary);

        function displaySummary(summary) {

        }

        function fillTable(attendance) {
            return undefined;
        }

        async function getAttendance() {
                const student_id = document.getElementById("children_id").value;
                const date = document.getElementById("date_id").value;
                return await(await fetch(`/attendance/getAttendanceWithDateAndStudent/${date}/${student_id}`)).json();
        }
    }

</script>

</html>